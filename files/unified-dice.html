<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>çµ±åˆã‚µã‚¤ã‚³ãƒ­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
<style>
  :root {
    --size: 90px;
    --pip: 12px;
    --gap: 14px;
  }
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
    margin: 0;
    padding: 24px;
    background: #f0f2f5;
    color: #111;
  }
  .container {
    max-width: 1200px;
    margin: 0 auto;
  }
  header {
    background: white;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
  }
  h1 {
    margin: 0 0 20px;
    font-size: 24px;
    font-weight: 700;
  }
  
  /* è¨­å®šãƒ‘ãƒãƒ« */
  .config-panel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
  }
  .config-group {
    background: #f8f9fa;
    padding: 16px;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
  }
  .config-group h3 {
    margin: 0 0 12px;
    font-size: 14px;
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .radio-group, .checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .radio-item, .checkbox-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px;
    cursor: pointer;
    border-radius: 6px;
    transition: background .15s;
  }
  .radio-item:hover, .checkbox-item:hover {
    background: rgba(0,0,0,.04);
  }
  .radio-item input, .checkbox-item input {
    cursor: pointer;
  }
  .radio-item label, .checkbox-item label {
    cursor: pointer;
    font-size: 14px;
    flex: 1;
  }
  .number-input {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
  }
  .number-input label {
    font-size: 14px;
    min-width: 80px;
  }
  .number-input input {
    flex: 1;
    padding: 6px 10px;
    border: 1px solid #d0d0d0;
    border-radius: 6px;
    font-size: 14px;
  }
  .disabled-section {
    opacity: 0.4;
    pointer-events: none;
  }

  /* æ“ä½œãƒœã‚¿ãƒ³ */
  .actions {
    display: flex;
    gap: 12px;
    margin-top: 16px;
    flex-wrap: wrap;
  }
  button {
    padding: 12px 24px;
    font-size: 15px;
    font-weight: 600;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: all .15s;
  }
  .btn-primary {
    background: #2563eb;
    color: white;
  }
  .btn-primary:hover {
    background: #1d4ed8;
  }
  .btn-primary:active {
    transform: translateY(1px);
  }
  .btn-primary:disabled {
    background: #94a3b8;
    cursor: not-allowed;
  }
  .btn-secondary {
    background: #64748b;
    color: white;
  }
  .btn-secondary:hover {
    background: #475569;
  }

  /* ã‚µã‚¤ã‚³ãƒ­ã‚¨ãƒªã‚¢ */
  .dice-container {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
    min-height: 200px;
  }
  
  /* 2Dç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
  .board-2d {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(var(--size), 1fr));
    gap: var(--gap);
    justify-items: center;
  }
  .die-2d {
    width: var(--size);
    height: var(--size);
    background: #fff;
    border-radius: 16px;
    border: 1px solid #d0d4da;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    padding: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
  }
  .rolling-2d {
    animation: shake2d 0.5s ease;
  }
  @keyframes shake2d {
    0%, 100% { transform: rotate(0) translate(0, 0); }
    25% { transform: rotate(6deg) translate(2px, -1px); }
    50% { transform: rotate(-5deg) translate(-2px, 1px); }
    75% { transform: rotate(3deg) translate(1px, 2px); }
  }

  /* 3Dç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
  .board-3d {
    display: flex;
    gap: var(--gap);
    perspective: 1000px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .die-wrap-3d {
    width: var(--size);
    height: var(--size);
    position: relative;
  }
  .cube {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
  }
  .face {
    position: absolute;
    inset: 0;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    background: white;
    border-radius: 12px;
    border: 1px solid #ccc;
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
  }
  .face::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 12px;
    background: radial-gradient(120% 120% at 20% 15%, rgba(0,0,0,0.08), rgba(0,0,0,0) 55%);
    pointer-events: none;
  }
  .f-front  { transform: translateZ(calc(var(--size) / 2)); }
  .f-back   { transform: rotateY(180deg) translateZ(calc(var(--size) / 2)); }
  .f-right  { transform: rotateY(90deg) translateZ(calc(var(--size) / 2)); }
  .f-left   { transform: rotateY(-90deg) translateZ(calc(var(--size) / 2)); }
  .f-top    { transform: rotateX(90deg) translateZ(calc(var(--size) / 2)); }
  .f-bottom { transform: rotateX(-90deg) translateZ(calc(var(--size) / 2)); }

  /* ãƒ”ãƒƒãƒ—ï¼ˆå…±é€šï¼‰ */
  .pip {
    width: var(--pip);
    height: var(--pip);
    background: #111;
    border-radius: 50%;
    margin: auto;
  }
  .p1 { grid-area: 1 / 1; }
  .p2 { grid-area: 1 / 2; }
  .p3 { grid-area: 1 / 3; }
  .p4 { grid-area: 2 / 1; }
  .p5 { grid-area: 2 / 2; }
  .p6 { grid-area: 2 / 3; }
  .p7 { grid-area: 3 / 1; }
  .p8 { grid-area: 3 / 2; }
  .p9 { grid-area: 3 / 3; }

  /* çµæœè¡¨ç¤º */
  .results {
    margin-top: 20px;
    padding: 16px;
    background: #f8f9fa;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
  }
  .results-detail {
    margin-top: 8px;
    font-size: 14px;
    font-weight: normal;
    color: #666;
  }

  /* ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ */
  .debug-controls {
    margin-top: 12px;
    padding: 12px;
    background: #fff3cd;
    border-radius: 6px;
    border: 1px solid #ffc107;
  }
  .debug-controls label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
  }
  .debug-inputs {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .debug-inputs input {
    width: 50px;
    padding: 4px 8px;
    border: 1px solid #d0d0d0;
    border-radius: 4px;
    text-align: center;
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ² çµ±åˆã‚µã‚¤ã‚³ãƒ­ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
      
      <div class="config-panel">
        <!-- æç”»æ–¹å¼ -->
        <div class="config-group">
          <h3>æç”»æ–¹å¼</h3>
          <div class="radio-group">
            <div class="radio-item">
              <input type="radio" name="render" id="render2d" value="2d">
              <label for="render2d">2D (ãƒ•ãƒ©ãƒƒãƒˆ)</label>
            </div>
            <div class="radio-item">
              <input type="radio" name="render" id="render3d" value="3d" checked>
              <label for="render3d">3D (ç«‹ä½“)</label>
            </div>
          </div>
        </div>

        <!-- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  -->
        <div class="config-group">
          <h3>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h3>
          <div class="radio-group">
            <div class="radio-item">
              <input type="radio" name="algorithm" id="algValue" value="value-first" checked>
              <label for="algValue">å‡ºç›®å…ˆè¡Œ (é«˜é€Ÿãƒ»æ­£ç¢º)</label>
            </div>
            <div class="radio-item">
              <input type="radio" name="algorithm" id="algVisual" value="visual-first">
              <label for="algVisual">æ¼”å‡ºå…ˆè¡Œ (è¦–è¦šé‡è¦–)</label>
            </div>
          </div>
        </div>

        <!-- 3Dæ¼”å‡ºã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
        <div class="config-group" id="options3d">
          <h3>3Dæ¼”å‡ºã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
          <div class="radio-group">
            <div class="radio-item">
              <input type="radio" name="stop3d" id="stopFree" value="free">
              <label for="stopFree">ãƒ•ãƒªãƒ¼ã‚¹ãƒˆãƒƒãƒ—</label>
            </div>
            <div class="radio-item">
              <input type="radio" name="stop3d" id="stopSnap" value="snap" checked>
              <label for="stopSnap">ãƒ“ã‚¿æ­¢ã‚ (æ­£ç¢ºãªè§’åº¦)</label>
            </div>
          </div>
        </div>

        <!-- å…±é€šè¨­å®š -->
        <div class="config-group">
          <h3>å…±é€šè¨­å®š</h3>
          <div class="number-input">
            <label for="diceCount">å€‹æ•°:</label>
            <input type="number" id="diceCount" min="1" max="12" value="3">
          </div>
          <div class="number-input">
            <label for="spinCount">å›è»¢æ•°:</label>
            <input type="number" id="spinCount" min="2" max="6" value="4">
          </div>
          <div class="number-input">
            <label for="duration">æ™‚é–“(ç§’):</label>
            <input type="number" id="duration" min="0.5" max="2.0" step="0.1" value="1.2">
          </div>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="debugMode">
              <label for="debugMode">ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</label>
            </div>
          </div>
        </div>
      </div>

      <!-- ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
      <div id="debugControls" class="debug-controls" style="display:none;">
        <label>ä»»æ„å‡ºç›®æŒ‡å®š (1-6ã€ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š):</label>
        <input type="text" id="debugValues" placeholder="ä¾‹: 6,6,6">
      </div>

      <div class="actions">
        <button id="rollBtn" class="btn-primary">ğŸ² æŒ¯ã‚‹ (Space)</button>
        <button id="resetBtn" class="btn-secondary">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </header>

    <div class="dice-container">
      <div id="diceBoard"></div>
      <div id="results" class="results" style="display:none;"></div>
    </div>
  </div>

<script>
(() => {
  // ===== ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ =====
  const state = {
    renderMode: '3d',      // '2d' or '3d'
    algorithm: 'value-first', // 'value-first' or 'visual-first'
    stop3d: 'snap',        // 'free' or 'snap' (3Dã®ã¿)
    diceCount: 3,
    spinCount: 4,
    duration: 1.2,
    debugMode: false,
    isRolling: false,
    diceElements: []       // ç¾åœ¨ã®ã‚µã‚¤ã‚³ãƒ­DOMè¦ç´ 
  };

  // ===== DOMè¦ç´  =====
  const diceBoard = document.getElementById('diceBoard');
  const resultsEl = document.getElementById('results');
  const rollBtn = document.getElementById('rollBtn');
  const resetBtn = document.getElementById('resetBtn');
  
  const render2d = document.getElementById('render2d');
  const render3d = document.getElementById('render3d');
  const algValue = document.getElementById('algValue');
  const algVisual = document.getElementById('algVisual');
  const stopFree = document.getElementById('stopFree');
  const stopSnap = document.getElementById('stopSnap');
  const options3d = document.getElementById('options3d');
  
  const diceCountInput = document.getElementById('diceCount');
  const spinCountInput = document.getElementById('spinCount');
  const durationInput = document.getElementById('duration');
  const debugModeCheck = document.getElementById('debugMode');
  const debugControls = document.getElementById('debugControls');
  const debugValuesInput = document.getElementById('debugValues');

  // ===== æš—å·å­¦çš„ä¹±æ•° =====
  function randint1n(n) {
    if (crypto?.getRandomValues) {
      const max = 0xFFFFFFFF;
      const limit = Math.floor(max / n) * n;
      const buf = new Uint32Array(1);
      for (;;) {
        crypto.getRandomValues(buf);
        if (buf[0] < limit) return (buf[0] % n) + 1;
      }
    } else {
      return Math.floor(Math.random() * n) + 1;
    }
  }

  // ===== ãƒ”ãƒƒãƒ—é…ç½® =====
  function getPipPositions(value) {
    const map = {
      1: [5],
      2: [1, 9],
      3: [1, 5, 9],
      4: [1, 3, 7, 9],
      5: [1, 3, 5, 7, 9],
      6: [1, 3, 4, 6, 7, 9]
    };
    return map[value] || [5];
  }

  // ===== 2D ã‚µã‚¤ã‚³ãƒ­ä½œæˆ =====
  function createDie2D(value) {
    const die = document.createElement('div');
    die.className = 'die-2d';
    const pips = getPipPositions(value);
    for (const pos of pips) {
      const pip = document.createElement('div');
      pip.className = `pip p${pos}`;
      die.appendChild(pip);
    }
    die.setAttribute('data-value', value);
    return die;
  }

  // ===== 3D ã‚µã‚¤ã‚³ãƒ­ä½œæˆ =====
  function createDie3D() {
    const wrap = document.createElement('div');
    wrap.className = 'die-wrap-3d';
    const cube = document.createElement('div');
    cube.className = 'cube';
    wrap.appendChild(cube);

    const faces = [
      { cls: 'f-front',  value: 1, pips: [5] },
      { cls: 'f-back',   value: 6, pips: [1, 3, 4, 6, 7, 9] },
      { cls: 'f-right',  value: 3, pips: [1, 5, 9] },
      { cls: 'f-left',   value: 4, pips: [1, 3, 7, 9] },
      { cls: 'f-top',    value: 5, pips: [1, 3, 5, 7, 9] },
      { cls: 'f-bottom', value: 2, pips: [1, 9] }
    ];

    for (const f of faces) {
      const face = document.createElement('div');
      face.className = `face ${f.cls}`;
      face.setAttribute('data-value', f.value);
      for (const pos of f.pips) {
        const pip = document.createElement('div');
        pip.className = `pip p${pos}`;
        face.appendChild(pip);
      }
      cube.appendChild(face);
    }

    return { wrap, cube };
  }

  // ===== 3D å›è»¢è§’åº¦ï¼ˆå‡ºç›®â†’å§¿å‹¢ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰ =====
  const ORIENT_3D = {
    1: { x: 0,   y: 0,   z: 0 },
    2: { x: 90,  y: 0,   z: 0 },
    3: { x: 0,   y: -90, z: 0 },
    4: { x: 0,   y: 90,  z: 0 },
    5: { x: -90, y: 0,   z: 0 },
    6: { x: 0,   y: 180, z: 0 }
  };

  // ===== ãƒœãƒ¼ãƒ‰åˆæœŸåŒ– =====
  function initBoard() {
    diceBoard.innerHTML = '';
    diceBoard.className = state.renderMode === '2d' ? 'board-2d' : 'board-3d';
    state.diceElements = [];
    resultsEl.style.display = 'none';

    const count = state.diceCount;
    
    if (state.renderMode === '2d') {
      for (let i = 0; i < count; i++) {
        const die = createDie2D(randint1n(6));
        diceBoard.appendChild(die);
        state.diceElements.push(die);
      }
    } else {
      for (let i = 0; i < count; i++) {
        const { wrap, cube } = createDie3D();
        diceBoard.appendChild(wrap);
        cube.style.transform = 'rotateX(-20deg) rotateY(30deg)';
        state.diceElements.push(cube);
      }
    }
  }

  // ===== 2D ãƒ­ãƒ¼ãƒ« =====
  function roll2D() {
    const dice = state.diceElements;
    const values = getTargetValues();
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
    dice.forEach(die => die.classList.add('rolling-2d'));

    setTimeout(() => {
      let total = 0;
      dice.forEach((die, i) => {
        const v = values[i];
        total += v;
        die.innerHTML = '';
        const pips = getPipPositions(v);
        for (const pos of pips) {
          const pip = document.createElement('div');
          pip.className = `pip p${pos}`;
          die.appendChild(pip);
        }
        die.setAttribute('data-value', v);
      });

      setTimeout(() => {
        dice.forEach(die => die.classList.remove('rolling-2d'));
        showResults(values, total);
        state.isRolling = false;
        rollBtn.disabled = false;
      }, 500);
    }, 160);
  }

  // ===== 3D ãƒ­ãƒ¼ãƒ« (å‡ºç›®å…ˆè¡Œ) =====
  function roll3DValueFirst() {
    const cubes = state.diceElements;
    const values = getTargetValues();
    const useSnap = state.stop3d === 'snap';
    
    let remaining = cubes.length;
    let total = 0;

    cubes.forEach((cube, idx) => {
      // åˆæœŸå§¿å‹¢ãƒªã‚»ãƒƒãƒˆ
      cube.style.transition = 'none';
      cube.style.transform = 'rotateX(-20deg) rotateY(30deg)';
      void cube.offsetWidth;

      const v = values[idx];
      total += v;
      const base = ORIENT_3D[v];
      const spins = state.spinCount;
      const rx = base.x + spins * 360 + (Math.random() * 10 - 5);
      const ry = base.y + spins * 360 + (Math.random() * 10 - 5);
      const rz = useSnap ? 0 : (Math.random() * 20 - 10);

      cube.style.transition = `transform ${state.duration}s cubic-bezier(.25,1,.3,1)`;
      cube.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)`;

      const onEnd = () => {
        if (useSnap) {
          cube.style.transition = 'none';
          cube.style.transform = `rotateX(${base.x}deg) rotateY(${base.y}deg) rotateZ(0deg)`;
        }
        cube.removeEventListener('transitionend', onEnd);
        remaining--;
        if (remaining === 0) {
          showResults(values, total);
          state.isRolling = false;
          rollBtn.disabled = false;
        }
      };
      cube.addEventListener('transitionend', onEnd);
    });
  }

  // ===== 3D ãƒ­ãƒ¼ãƒ« (æ¼”å‡ºå…ˆè¡Œ) =====
  function roll3DVisualFirst() {
    const cubes = state.diceElements;
    const values = getTargetValues();
    
    let remaining = cubes.length;
    let total = 0;

    cubes.forEach((cube, idx) => {
      const v = values[idx];
      total += v;
      const base = ORIENT_3D[v];
      const spins = state.spinCount;
      const rx = base.x + spins * 360 + (Math.random() * 20 - 10);
      const ry = base.y + spins * 360 + (Math.random() * 20 - 10);
      const rz = Math.random() * 180 - 90;

      cube.style.transition = `transform ${state.duration}s cubic-bezier(.2,.7,.2,1)`;
      cube.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg)`;

      const onEnd = () => {
        cube.removeEventListener('transitionend', onEnd);
        remaining--;
        if (remaining === 0) {
          showResults(values, total);
          state.isRolling = false;
          rollBtn.disabled = false;
        }
      };
      cube.addEventListener('transitionend', onEnd);
    });
  }

  // ===== ç›®æ¨™å€¤å–å¾—ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰ =====
  function getTargetValues() {
    if (state.debugMode) {
      const input = debugValuesInput.value.trim();
      if (input) {
        const parsed = input.split(',').map(v => {
          const n = parseInt(v.trim());
          return (n >= 1 && n <= 6) ? n : randint1n(6);
        });
        while (parsed.length < state.diceCount) {
          parsed.push(randint1n(6));
        }
        return parsed.slice(0, state.diceCount);
      }
    }
    return Array.from({ length: state.diceCount }, () => randint1n(6));
  }

  // ===== çµæœè¡¨ç¤º =====
  function showResults(values, total) {
    resultsEl.style.display = 'block';
    resultsEl.innerHTML = `
      <div>åˆè¨ˆ: <strong>${total}</strong></div>
      <div class="results-detail">å‡ºç›®: ${values.join(', ')}</div>
    `;
  }

  // ===== ãƒ­ãƒ¼ãƒ«å®Ÿè¡Œ =====
  function executeRoll() {
    if (state.isRolling) return;
    state.isRolling = true;
    rollBtn.disabled = true;

    if (state.renderMode === '2d') {
      roll2D();
    } else {
      if (state.algorithm === 'value-first') {
        roll3DValueFirst();
      } else {
        roll3DVisualFirst();
      }
    }
  }

  // ===== ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ =====
  rollBtn.addEventListener('click', executeRoll);
  resetBtn.addEventListener('click', () => {
    state.isRolling = false;
    rollBtn.disabled = false;
    initBoard();
  });

  // æç”»æ–¹å¼å¤‰æ›´
  [render2d, render3d].forEach(input => {
    input.addEventListener('change', (e) => {
      state.renderMode = e.target.value;
      options3d.classList.toggle('disabled-section', state.renderMode === '2d');
      initBoard();
    });
  });

  // ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å¤‰æ›´
  [algValue, algVisual].forEach(input => {
    input.addEventListener('change', (e) => {
      state.algorithm = e.target.value;
    });
  });

  // 3Dåœæ­¢æ–¹å¼å¤‰æ›´
  [stopFree, stopSnap].forEach(input => {
    input.addEventListener('change', (e) => {
      state.stop3d = e.target.value;
    });
  });

  // è¨­å®šå€¤å¤‰æ›´
  diceCountInput.addEventListener('change', (e) => {
    state.diceCount = Math.max(1, Math.min(12, parseInt(e.target.value) || 1));
    initBoard();
  });
  spinCountInput.addEventListener('change', (e) => {
    state.spinCount = Math.max(2, Math.min(6, parseInt(e.target.value) || 4));
  });
  durationInput.addEventListener('change', (e) => {
    state.duration = Math.max(0.5, Math.min(2.0, parseFloat(e.target.value) || 1.2));
  });

  // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
  debugModeCheck.addEventListener('change', (e) => {
    state.debugMode = e.target.checked;
    debugControls.style.display = state.debugMode ? 'block' : 'none';
  });

  // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼
  document.addEventListener('keydown', (e) => {
    if (e.code === 'Space' && !state.isRolling) {
      e.preventDefault();
      executeRoll();
    }
  });

  // åˆæœŸåŒ–
  initBoard();
})();
</script>
</body>
</html>
